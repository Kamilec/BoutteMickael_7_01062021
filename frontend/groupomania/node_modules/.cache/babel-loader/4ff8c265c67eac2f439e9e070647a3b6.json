{"remainingRequest":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\src\\views\\Profile.vue?vue&type=template&id=ced23842&scoped=true","dependencies":[{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\src\\views\\Profile.vue","mtime":1631240483631},{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630549438092},{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\babel-loader\\lib\\index.js","mtime":1630549441356},{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1630549444514},{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630549438092},{"path":"C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1630549442492}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIG1lcmdlUHJvcHMgYXMgX21lcmdlUHJvcHMsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LWNlZDIzODQyIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi1jZWQyMzg0MiIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJjYXJkIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImF2YXRhcl91c2VyIgp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBrZXk6IDAKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAga2V5OiAxCn07CnZhciBfaG9pc3RlZF81ID0gewogIGtleTogMAp9OwoKdmFyIF9ob2lzdGVkXzYgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJsYWJlbCIsIHsKICBmb3I6ICJhdmF0YXIiLAogIGNsYXNzOiAiZm9ybS1sYWJlbCIKfSwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgWyhfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgewogICAgY2xhc3M6ICJwcm9maWxfX2luZm8iLAogICAga2V5OiAkZGF0YS51c2VyCiAgfSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgiaW1nIiwgewogICAgaWQ6ICJhdmF0YXItVXNlciIsCiAgICBjbGFzczogImF2YXRhclVzZXIiLAogICAgc3JjOiAkZGF0YS51c2VyLmF2YXRhciwKICAgIGFsdDogImF2YXRhclVzZXIiCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbInNyYyJdKV0pLCBfY3JlYXRlVk5vZGUoInAiLCBudWxsLCAiUHNldWRvOiAiICsgX3RvRGlzcGxheVN0cmluZygkZGF0YS51c2VyLnBzZXVkbyksIDEKICAvKiBURVhUICovCiAgKSwgX2NyZWF0ZVZOb2RlKCJwIiwgbnVsbCwgIkVtYWlsOiAiICsgX3RvRGlzcGxheVN0cmluZygkZGF0YS51c2VyLmVtYWlsKSwgMQogIC8qIFRFWFQgKi8KICApLCAkZGF0YS5yb2xlID09PSAnYWRtaW4nID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJwIiwgX2hvaXN0ZWRfMywgIiBSb2xlIDogQWRtaW4gIikpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJwIiwgX2hvaXN0ZWRfNCwgIiBSb2xlIDogVXNlciAiKSldKSksICRkYXRhLnVzZXJJZCA9PSAkZGF0YS51c2VyLmlkID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZVZOb2RlKCJmb3JtIiwgewogICAgaWQ6ICJzdXJ2ZXkiLAogICAgZW5jdHlwZTogIm11bHRpcGFydC9mb3JtLWRhdGEiLAogICAgb25TdWJtaXQ6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMubW9kaWZ5QXZhdGFyKCk7CiAgICB9LCBbInByZXZlbnQiXSkpCiAgfSwgW19ob2lzdGVkXzYsIF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAiZmlsZSIsCiAgICBjbGFzczogImZvcm1fX3Jvd19faW5wdXQiLAogICAgbmFtZTogImltYWdlIiwKICAgIGlkOiAiaW1hZ2UiLAogICAgcmVmOiAiaW1hZ2UiLAogICAgb25DaGFuZ2U6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMucHJldmlld1VwbG9hZCgpOwogICAgfSkKICB9LCBudWxsLCA1NDQKICAvKiBIWURSQVRFX0VWRU5UUywgTkVFRF9QQVRDSCAqLwogICksIF9jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogICAgdHlwZTogInN1Ym1pdCIsCiAgICBjbGFzczogImZvcm0tY29udHJvbCIsCiAgICBuYW1lOiAic3VibWl0QXZhdGFyIiwKICAgIGlkOiAic3VibWl0QXZhdGFyIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMubW9kaWZ5QXZhdGFyICYmICRvcHRpb25zLm1vZGlmeUF2YXRhci5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0sIFsicHJldmVudCJdKSkKICB9LCAiIFVwZGF0ZSAiKV0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCBfY3JlYXRlVk5vZGUoImJ1dHRvbiIsIF9tZXJnZVByb3BzKHsKICAgIGNsYXNzOiAicHJvZmlsX19idXR0b24iCiAgfSwgJGRhdGEudXNlciwgewogICAgb25DbGljazogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSBfd2l0aE1vZGlmaWVycyhmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5kZWxldGVVc2VyKCRkYXRhLnVzZXIuaWQpOwogICAgfSwgWyJwcmV2ZW50Il0pKQogIH0pLCAiIFN1cHByaW1lciB2b3RyZSBjb21wdGUgIiwgMTYKICAvKiBGVUxMX1BST1BTICovCiAgKV0pOwp9KTs="},{"version":3,"sources":["C:\\Users\\COMPTE FORMATION\\Documents\\GitHub\\p7_maquette\\frontend\\groupomania\\src\\views\\Profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"profil__info\" :key=\"user\">\r\n      <div class=\"avatar_user\">\r\n        <img\r\n          id=\"avatar-User\"\r\n          class=\"avatarUser\"\r\n          :src=\"user.avatar\"\r\n          alt=\"avatarUser\"\r\n        />\r\n      </div>\r\n      <p>Pseudo: {{ user.pseudo }}</p>\r\n      <p>Email: {{ user.email }}</p>\r\n      <p v-if=\"role === 'admin'\">\r\n        Role : Admin\r\n      </p>\r\n      <p v-else>\r\n        Role : User\r\n      </p>\r\n    </div>\r\n    <div v-if=\"userId == user.id\">\r\n      <form\r\n        id=\"survey\"\r\n        enctype=\"multipart/form-data\"\r\n        @submit.prevent=\"modifyAvatar()\"\r\n      >\r\n        <label for=\"avatar\" class=\"form-label\"></label>\r\n        <input\r\n          type=\"file\"\r\n          class=\"form__row__input\"\r\n          name=\"image\"\r\n          id=\"image\"\r\n          ref=\"image\"\r\n          v-on:change=\"previewUpload()\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          class=\"form-control\"\r\n          name=\"submitAvatar\"\r\n          id=\"submitAvatar\"\r\n          @click.prevent=\"modifyAvatar\"\r\n        >\r\n          Update\r\n        </button>\r\n      </form>\r\n    </div>\r\n    <button\r\n      class=\"profil__button\"\r\n      v-bind=\"user\"\r\n      @click.prevent=\"deleteUser(user.id)\"\r\n    >\r\n      Supprimer votre compte\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import axios from 'axios';\r\n  export default {\r\n    name: 'Profile',\r\n\r\n    data() {\r\n      return {\r\n        user: '',\r\n        userId: localStorage.getItem('userId'),\r\n        role: localStorage.getItem('role'),\r\n        avatar: '',\r\n        token: localStorage.getItem('token'),\r\n      };\r\n    },\r\n\r\n    created() {\r\n      axios\r\n        .get(`http://localhost:3000/user/${this.userId}`, {\r\n          headers: { Authorization: 'Bearer ' + localStorage.token },\r\n        })\r\n        .then((res) => {\r\n          this.user = res.data;\r\n          if (this.user.avatar === null)\r\n            this.user.avatar = 'http://localhost:3000/images/userDefaut.jpg';\r\n        });\r\n    },\r\n\r\n    methods: {\r\n      previewUpload() {\r\n        this.image = this.$refs.image.files[0];\r\n        this.avatar = URL.createObjectURL(this.image);\r\n        document.getElementById('avatar-User').src = this.avatar;\r\n      },\r\n      modifyAvatar() {\r\n        const formData = new FormData();\r\n        formData.append('userId', parseInt(localStorage.getItem('userId')));\r\n        formData.append('image', this.image);\r\n        axios\r\n          .put(`http://localhost:3000/user/update/${this.userId}`, formData, {\r\n            headers: { Authorization: 'Bearer ' + localStorage.token },\r\n          })\r\n          .then(() => this.$router.go());\r\n      },\r\n\r\n      deleteUser(id) {\r\n        axios\r\n          .delete(`http://localhost:3000/user/delete/${id}`, {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              Authorization: 'Bearer ' + localStorage.token,\r\n            },\r\n          })\r\n          .then(() => this.$router.push('/logout'));\r\n      },\r\n    },\r\n  };\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .avatarUser {\r\n    margin-top: 10px;\r\n    width: 150px;\r\n    border-radius: 25px 25px 25px 25px;\r\n  }\r\n</style>\r\n"],"sourceRoot":""}]}